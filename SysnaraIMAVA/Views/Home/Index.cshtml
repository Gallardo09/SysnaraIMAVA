@{
    ViewData["Title"] = "IMAVA";
    var años = ViewBag.Años as List<SysnaraIMAVA.Models.Año>;
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>
    <style>
        /* Estilos generales */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f6f9;
        }

        .header {
            background: linear-gradient(135deg, #0056b3, #003b7d);
            color: white;
            padding: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .inner-header {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            padding: 20px;
        }

        .titulo-container {
            text-align: center;
            margin-right: 20px;
        }

            .titulo-container h1 {
                font-size: 48px;
                margin: 0;
            }

            .titulo-container h6 {
                font-size: 18px;
                margin: 0;
            }

        #imagenPrincipal {
            width: 450px;
            height: auto;
        }

        .waves {
            position: relative;
            width: 100%;
            height: 15vh;
            margin-bottom: -7px;
            min-height: 100px;
            max-height: 150px;
        }

        .container {
            padding: 20px;
        }

        .card {
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .card-body {
            padding: 20px;
        }

        .card-title {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .card-text {
            font-size: 36px;
            font-weight: bold;
        }

        .icon {
            font-size: 40px;
            color: #0056b3;
        }

        /* Media Queries para pantallas pequeñas */
        @@media (max-width: 768px) {
            .inner-header

        {
            flex-direction: column;
            text-align: center;
        }

        .titulo-container {
            margin-right: 0;
            margin-bottom: 20px;
        }

            .titulo-container h1 {
                font-size: 36px;
            }

            .titulo-container h6 {
                font-size: 16px;
            }

        #imagenPrincipal {
            width: 300px;
        }

        .card-title {
            font-size: 20px;
        }

        .card-text {
            font-size: 28px;
        }

        .icon {
            font-size: 30px;
        }

        }

        @@media (max-width: 480px) {
            .titulo-container h1

        {
            font-size: 28px;
        }

        .titulo-container h6 {
            font-size: 14px;
        }

        #imagenPrincipal {
            width: 200px;
        }

        .card-title {
            font-size: 18px;
        }

        .card-text {
            font-size: 24px;
        }

        .icon {
            font-size: 24px;
        }

        }
    </style>
</head>
<body>
    <div class="header">
        <div class="inner-header">
            <div class="titulo-container">
                <h1>SYSNARA</h1>
                <h6>Sistema de Matrícula <span class="word-container"><span class="word anglosajon">Estudiantil</span><span class="word internacional">Hondureño</span></span></h6>
            </div>
            <img id="imagenPrincipal" src="~/Recursos/home.png" alt="Logo" />
        </div>
        <div>
            <svg class="waves" viewBox="1 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
                <defs>
                    <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
                </defs>
                <g class="parallax">
                    <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(255,255,255,0.7)" />
                    <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(255,255,255,0.5)" />
                    <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(255,255,255,0.3)" />
                    <use xlink:href="#gentle-wave" x="48" y="7" fill="#fff" />
                </g>
            </svg>
        </div>
    </div>

@*     <div class="container">
        <p style="text-align: center;">Sistema de Matricula V.23.5.9</p>
        <h2 class="card-title" style="text-align: center;">DATOS ESTADÍSTICOS</h2>
        <div class="card shadow-sm border-light">
            <div class="card-body">
                <div class="row justify-content-center">
                    <div class="col-md-3 mb-2">
                        <label for="filtroAño" class="form-label">Año</label>
                        <select class="form-select" id="filtroAño">
                            <option value="">Seleccione un año</option>
                            @if (años != null)
                            {
                                @foreach (var año in años)
                                {
                                    <option value="@año.Idaño">@año.Idaño</option>
                                }
                            }
                        </select>
                    </div>
                    <div class="col-md-3 mb-2">
                        <label for="filtroSistema" class="form-label">Sistema</label>
                        <select class="form-select" id="filtroSistema">
                            <option value="">Seleccione un sistema</option>
                            <option value="ANGLOSAJÓN">ANGLOSAJÓN</option>
                            <option value="TRADICIONAL">TRADICIONAL</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-md-3 mb-4">
                <div class="card overlay-card matriculados">
                    <div class="card-body">
                        <h5 class="card-title">Matriculados</h5>
                        <h3 class="card-text">@ViewBag.TotalMatriculados</h3>
                        <i class="la la-graduation-cap icon"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card overlay-card ninas">
                    <div class="card-body">
                        <h5 class="card-title">Niñas</h5>
                        <h3 class="card-text">@ViewBag.AlumnosFemeninos</h3>
                        <i class="la la-female icon"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card overlay-card varones">
                    <div class="card-body">
                        <h5 class="card-title">Varones</h5>
                        <h3 class="card-text">@ViewBag.AlumnosMasculinos</h3>
                        <i class="la la-male icon"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card overlay-card nuevo-ingreso">
                    <div class="card-body">
                        <h5 class="card-title">Nuevo Ingreso</h5>
                        <h3 class="card-text">@ViewBag.NuevoIngreso</h3>
                        <i class="la la-user-plus icon"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card overlay-card reingreso">
                    <div class="card-body">
                        <h5 class="card-title">Reingreso</h5>
                        <h3 class="card-text">@ViewBag.Reingreso</h3>
                        <i class="la la-redo icon"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Función para animar el conteo
        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const currentValue = Math.floor(progress * (end - start) + start);
                obj.innerHTML = currentValue.toLocaleString();
                obj.classList.add('animate-value');
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        // Función para verificar si un elemento está visible en la ventana
        function isElementInViewport(el) {
            const rect = el.getBoundingClientRect();
            return (
                rect.top >= 0 &&
                rect.left >= 0 &&
                rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                rect.right <= (window.innerWidth || document.documentElement.clientWidth)
            );
        }

        // Función para iniciar las animaciones cuando las cards sean visibles
        function handleScrollAnimations() {
            const numbers = document.querySelectorAll('.card-text');
            numbers.forEach(number => {
                if (isElementInViewport(number) && !number.dataset.animated) {
                    const finalValue = parseInt(number.innerHTML.replace(/,/g, ''));
                    animateValue(number, 0, finalValue, 2000); // 2000ms = 2 segundos de duración
                    number.dataset.animated = 'true';
                }
            });
        }

        // Iniciar animaciones cuando la página carga y cuando se hace scroll
        document.addEventListener('DOMContentLoaded', handleScrollAnimations);
        document.addEventListener('scroll', handleScrollAnimations);
    </script>

    <script src="~/lib/jquery360/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#filtroAño, #filtroSistema').change(function () {
                var filtroAño = $('#filtroAño').val();
                var filtroSistema = $('#filtroSistema').val();

                $.ajax({
                    url: '@Url.Action("ObtenerDatosEstadisticos", "Home")',
                    type: 'GET',
                    data: { filtroAño: filtroAño, filtroSistema: filtroSistema },
                    success: function (response) {
                        if (response.success) {
                            // Actualizamos los valores de las tarjetas
                            $('.matriculados .card-text').text(response.totalMatriculados);
                            $('.ninas .card-text').text(response.alumnosFemeninos);
                            $('.varones .card-text').text(response.alumnosMasculinos);
                            $('.nuevo-ingreso .card-text').text(response.nuevoIngreso);
                            $('.reingreso .card-text').text(response.reingreso);

                            // Aplicar la animación CSS a los números
                            animateValue($('.matriculados .card-text')[0], 0, response.totalMatriculados, 2000);
                            animateValue($('.ninas .card-text')[0], 0, response.alumnosFemeninos, 2000);
                            animateValue($('.varones .card-text')[0], 0, response.alumnosMasculinos, 2000);
                            animateValue($('.nuevo-ingreso .card-text')[0], 0, response.nuevoIngreso, 2000);
                            animateValue($('.reingreso .card-text')[0], 0, response.reingreso, 2000);
                        } else {
                            // Mostrar el mensaje de error usando Toastr
                            toastr.error(response.message);  // Error Toast
                        }
                    },
                    error: function () {
                        toastr.error("Ocurrió un error al obtener los datos.");  // Error Toast
                    }
                });
            });
        });
    </script> *@
</body>
</html>